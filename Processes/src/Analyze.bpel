<?xml version="1.0" encoding="UTF-8" ?>
<process
    name="Analyze"
    targetNamespace="http://enterprise.netbeans.org/bpel/WSCat-Processes/Analyze"
    xmlns:tns="http://enterprise.netbeans.org/bpel/WSCat-Processes/Analyze"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor2"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling">
    <import namespace="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" location="WSCatServices.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://j2ee.netbeans.org/wsdl/Processes/src/WSDLServiceWrapper" location="WSDLServiceWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://service.wscat.soen487/" location="WSDLService.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://j2ee.netbeans.org/wsdl/Processes/src/RESTServiceWrapper2" location="RESTServiceWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://service.wscat.soen487/" location="RESTService.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <partnerLinks>
        <partnerLink name="Client" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" partnerLinkType="tns:WSCatServices" myRole="WSCatServicesPortTypeRole"/>
        <partnerLink name="WSDLCallback" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSDLServiceWrapper" partnerLinkType="tns:Receive" myRole="WSDLReceive"/>
        <partnerLink name="RESTCallback" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/RESTServiceWrapper2" partnerLinkType="tns:Receive" myRole="RESTReceive"/>
    </partnerLinks>
    <variables>
        <variable name="AnalyzeOut" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" messageType="tns:AnalyzeResponse"/>
        <variable name="AnalyzeIn" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" messageType="tns:AnalyzeRequest"/>
    </variables>
    <sequence>
        <receive name="Receive1" createInstance="yes" partnerLink="Client" operation="Analyze" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" portType="tns:WSCatServicesPortType" variable="AnalyzeIn"/>
        <assign name="Assign1"/>
        <flow name="Flow1">
            <if name="If1">
                <condition>contains($AnalyzeIn.type, 'WSDL')</condition>
                <pick name="Pick1">
                    <onMessage/>
                    <onAlarm>
                        <for>'P0Y0M0DT0H0M5.0S'</for>
                    </onAlarm>
                </pick>
            </if>
            <if name="If2">
                <condition>contains('REST', $AnalyzeIn.type)</condition>
                <pick name="Pick2">
                    <onMessage/>
                    <onAlarm>
                        <for>'P0Y0M0DT0H0M5.0S'</for>
                    </onAlarm>
                </pick>
            </if>
            <if name="If3">
                <condition>contains('WADL', $AnalyzeIn.type)</condition>
                <pick name="Pick3">
                    <onMessage/>
                    <onAlarm>
                        <for>'P0Y0M0DT0H0M5.0S'</for>
                    </onAlarm>
                </pick>
            </if>
        </flow>
        <reply name="Reply1" partnerLink="Client" operation="Analyze" xmlns:tns="http://j2ee.netbeans.org/wsdl/Processes/src/WSCatServices" portType="tns:WSCatServicesPortType" variable="AnalyzeOut"/>
    </sequence>
</process>
